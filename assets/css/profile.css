/* ============================================================
   PROFILE.CSS  —  Namak Messenger
   Profile page: own profile + view others + edit forms
   Depends on: base.css, app.css
   ============================================================ */

/* ──────────────────────────────────────────────────────────
   1. PROFILE PAGE LAYOUT
────────────────────────────────────────────────────────── */
.profile-page {
    display:  flex;
    height:   100%;
    overflow: hidden;
}

.profile-main {
    flex:           1;
    overflow-y:     auto;
    overflow-x:     hidden;
    padding:        var(--space-5) var(--space-5) var(--space-10);
    overscroll-behavior: contain;
}

/* Centered max-width column */
.profile-col {
    max-width:  640px;
    margin:     0 auto;
    width:      100%;
    display:    flex;
    flex-direction: column;
    gap:        var(--space-4);
}

/* ──────────────────────────────────────────────────────────
   2. HERO CARD
────────────────────────────────────────────────────────── */
.profile-hero-card {
    background:    var(--surface);
    border-radius: var(--radius-2xl);
    border:        1px solid var(--border-light);
    overflow:      hidden;
    position:      relative;
}

/* Cover gradient */
.profile-hero-card__cover {
    height:     110px;
    background: linear-gradient(
            135deg,
            var(--primary) 0%,
            #7c3aed       50%,
            #db2777       100%
    );
    position:   relative;
    overflow:   hidden;
}
/* Custom cover image */
.profile-hero-card__cover--image {
    background: none;
}
.profile-hero-card__cover-img {
    width:      100%;
    height:     100%;
    object-fit: cover;
    display:    block;
}
/* Animated gradient on own profile */
.profile-hero-card__cover--animated {
    background-size: 300% 300%;
    animation: gradientShift 8s ease infinite;
}
@keyframes gradientShift {
    0%   { background-position: 0%   50%; }
    50%  { background-position: 100% 50%; }
    100% { background-position: 0%   50%; }
}

/* Edit cover button */
.profile-hero-card__edit-cover {
    position:        absolute;
    bottom:          var(--space-2);
    right:           var(--space-2);
    background:      rgba(0,0,0,0.45);
    color:           white;
    border-radius:   var(--radius-full);
    padding:         var(--space-1) var(--space-3);
    font-size:       var(--text-xs);
    font-weight:     var(--weight-medium);
    display:         flex;
    align-items:     center;
    gap:             var(--space-1);
    cursor:          pointer;
    backdrop-filter: blur(4px);
    transition:      background var(--transition-base);
}
.profile-hero-card__edit-cover:hover { background: rgba(0,0,0,0.65); }
.profile-hero-card__edit-cover svg   { width: 13px; height: 13px; }
[dir="rtl"] .profile-hero-card__edit-cover { right: auto; left: var(--space-2); }

/* Avatar row */
.profile-hero-card__avatar-row {
    display:       flex;
    align-items:   flex-end;
    justify-content:space-between;
    padding:       0 var(--space-5);
    margin-top:    -44px;
    margin-bottom: var(--space-3);
    position:      relative;
    z-index:       1;
}

/* ── Avatar ── */
.profile-avatar-wrap {
    position: relative;
    display:  inline-block;
}
.profile-avatar-img {
    width:         88px;
    height:        88px;
    border-radius: 50%;
    border:        4px solid var(--surface);
    object-fit:    cover;
    display:       block;
    box-shadow:    var(--shadow-md);
    background:    var(--avatar-bg);
}
.profile-avatar-fallback {
    width:           88px;
    height:          88px;
    border-radius:   50%;
    border:          4px solid var(--surface);
    background:      var(--avatar-bg);
    color:           var(--avatar-text);
    font-size:       32px;
    font-weight:     var(--weight-bold);
    display:         flex;
    align-items:     center;
    justify-content: center;
    box-shadow:      var(--shadow-md);
    user-select:     none;
}
.profile-avatar-edit-btn {
    position:        absolute;
    bottom:          4px;
    right:           4px;
    width:           26px;
    height:          26px;
    background:      var(--primary);
    border-radius:   50%;
    border:          2px solid var(--surface);
    display:         flex;
    align-items:     center;
    justify-content: center;
    cursor:          pointer;
    transition:      background  var(--transition-base),
    transform   var(--transition-spring);
}
.profile-avatar-edit-btn:hover { background: var(--primary-hover); transform: scale(1.1); }
.profile-avatar-edit-btn svg   { width: 13px; height: 13px; color: white; }
[dir="rtl"] .profile-avatar-edit-btn { right: auto; left: 4px; }

/* Online badge */
.profile-avatar-online {
    position:      absolute;
    bottom:        6px;
    right:         6px;
    width:         16px;
    height:        16px;
    background:    var(--online-color);
    border-radius: 50%;
    border:        3px solid var(--surface);
}
[dir="rtl"] .profile-avatar-online { right: auto; left: 6px; }

/* Quick action buttons beside avatar */
.profile-hero-card__quick-actions {
    display:     flex;
    align-items: center;
    gap:         var(--space-2);
    padding-bottom: var(--space-1);
}

/* ── Hero body ── */
.profile-hero-card__body {
    padding:    0 var(--space-5) var(--space-5);
    display:    flex;
    flex-direction: column;
    gap:        var(--space-1);
}

.profile-hero-card__name {
    font-size:   var(--text-2xl);
    font-weight: var(--weight-bold);
    color:       var(--text);
    line-height: var(--leading-tight);
    word-break:  break-word;
}
/* Verified badge inline */
.profile-verified {
    display:         inline-flex;
    align-items:     center;
    justify-content: center;
    width:           20px;
    height:          20px;
    background:      var(--primary);
    border-radius:   50%;
    margin-left:     var(--space-1);
    vertical-align:  middle;
    flex-shrink:     0;
}
.profile-verified svg { width: 12px; height: 12px; color: white; }
[dir="rtl"] .profile-verified { margin-left: 0; margin-right: var(--space-1); }

.profile-hero-card__username {
    font-size:  var(--text-sm);
    color:      var(--text-muted);
    font-weight:var(--weight-normal);
}

.profile-hero-card__bio {
    font-size:   var(--text-sm);
    color:       var(--text-secondary);
    line-height: var(--leading-relaxed);
    word-break:  break-word;
    white-space: pre-wrap;
    margin-top:  var(--space-1);
}

.profile-hero-card__meta-row {
    display:     flex;
    flex-wrap:   wrap;
    gap:         var(--space-3) var(--space-5);
    margin-top:  var(--space-2);
}

.profile-hero-card__meta-item {
    display:     flex;
    align-items: center;
    gap:         var(--space-1);
    font-size:   var(--text-xs);
    color:       var(--text-muted);
}
.profile-hero-card__meta-item svg { width: 13px; height: 13px; flex-shrink: 0; }
.profile-hero-card__meta-item a {
    color:            var(--primary);
    text-decoration:  none;
    word-break:       break-all;
}
.profile-hero-card__meta-item a:hover { text-decoration: underline; }

/* ──────────────────────────────────────────────────────────
   3. STATS BAR  (groups, contacts, etc.)
────────────────────────────────────────────────────────── */
.profile-stats {
    display:      grid;
    grid-template-columns: repeat(3, 1fr);
    background:   var(--surface);
    border-radius:var(--radius-2xl);
    border:       1px solid var(--border-light);
    overflow:     hidden;
}

.profile-stat {
    display:         flex;
    flex-direction:  column;
    align-items:     center;
    justify-content: center;
    padding:         var(--space-4) var(--space-2);
    cursor:          pointer;
    transition:      background var(--transition-fast);
    position:        relative;
    text-align:      center;
    gap:             2px;
}
.profile-stat:not(:last-child)::after {
    content:    '';
    position:   absolute;
    right:      0;
    top:        20%;
    bottom:     20%;
    width:      1px;
    background: var(--border-light);
}
[dir="rtl"] .profile-stat:not(:last-child)::after {
    right: auto;
    left:  0;
}
.profile-stat:hover { background: var(--surface-3); }

.profile-stat__value {
    font-size:   var(--text-xl);
    font-weight: var(--weight-bold);
    color:       var(--text);
    line-height: 1;
}
.profile-stat__label {
    font-size:  var(--text-xs);
    color:      var(--text-muted);
    white-space:nowrap;
}

/* ──────────────────────────────────────────────────────────
   4. EDIT PROFILE FORM
────────────────────────────────────────────────────────── */
.profile-edit-section {
    background:    var(--surface);
    border-radius: var(--radius-2xl);
    border:        1px solid var(--border-light);
    overflow:      hidden;
}

.profile-edit-section__header {
    display:       flex;
    align-items:   center;
    gap:           var(--space-3);
    padding:       var(--space-4) var(--space-5);
    border-bottom: 1px solid var(--border-light);
}
.profile-edit-section__title {
    flex:        1;
    font-size:   var(--text-md);
    font-weight: var(--weight-semibold);
    color:       var(--text);
}
.profile-edit-section__icon {
    width:       20px;
    height:      20px;
    color:       var(--primary);
    flex-shrink: 0;
}

.profile-edit-section__body {
    padding:        var(--space-5);
    display:        flex;
    flex-direction: column;
    gap:            var(--space-4);
}

/* Two-column name row */
.profile-edit-name-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap:     var(--space-3);
}
@media (max-width: 480px) {
    .profile-edit-name-row { grid-template-columns: 1fr; }
}

/* Character counter */
.profile-input-wrap {
    position: relative;
}
.profile-char-count {
    position:   absolute;
    bottom:     var(--space-1);
    right:      var(--space-3);
    font-size:  var(--text-xs);
    color:      var(--text-muted);
    pointer-events: none;
    user-select:    none;
    line-height:    1;
}
.profile-char-count--warn  { color: var(--warning); }
.profile-char-count--limit { color: var(--text-danger); }
[dir="rtl"] .profile-char-count { right: auto; left: var(--space-3); }

/* Username availability indicator */
.profile-username-status {
    display:     flex;
    align-items: center;
    gap:         var(--space-1);
    font-size:   var(--text-xs);
    height:      16px;
    margin-top:  2px;
}
.profile-username-status--checking { color: var(--text-muted); }
.profile-username-status--available { color: var(--text-success); }
.profile-username-status--taken     { color: var(--text-danger); }
.profile-username-status--invalid   { color: var(--text-danger); }
.profile-username-status svg { width: 13px; height: 13px; flex-shrink: 0; }

/* Username prefix @ inside input */
.profile-username-input-wrap {
    position: relative;
}
.profile-username-prefix {
    position:       absolute;
    left:           var(--space-3);
    top:            50%;
    transform:      translateY(-50%);
    color:          var(--text-muted);
    font-size:      var(--text-sm);
    pointer-events: none;
    user-select:    none;
}
.profile-username-prefix + .form-input { padding-left: calc(var(--space-3) + 12px); }
[dir="rtl"] .profile-username-prefix {
    left:          auto;
    right:         var(--space-3);
}
[dir="rtl"] .profile-username-prefix + .form-input {
    padding-left:  var(--space-3);
    padding-right: calc(var(--space-3) + 12px);
}

/* Bio textarea with emoji toggle */
.profile-bio-wrap {
    position: relative;
}
.profile-bio-emoji-btn {
    position:  absolute;
    bottom:    var(--space-2);
    right:     var(--space-2);
    font-size: 18px;
    cursor:    pointer;
    opacity:   0.5;
    transition:opacity var(--transition-fast),
    transform var(--transition-spring);
    line-height:1;
    user-select:none;
}
.profile-bio-emoji-btn:hover { opacity: 1; transform: scale(1.2); }
[dir="rtl"] .profile-bio-emoji-btn { right: auto; left: var(--space-2); }

/* ──────────────────────────────────────────────────────────
   5. PROFILE INFO ROWS  (view mode)
────────────────────────────────────────────────────────── */
.profile-info-card {
    background:    var(--surface);
    border-radius: var(--radius-2xl);
    border:        1px solid var(--border-light);
    overflow:      hidden;
}

.profile-info-card__header {
    display:       flex;
    align-items:   center;
    gap:           var(--space-3);
    padding:       var(--space-4) var(--space-5);
    border-bottom: 1px solid var(--border-light);
}
.profile-info-card__title {
    flex:        1;
    font-size:   var(--text-md);
    font-weight: var(--weight-semibold);
    color:       var(--text);
}
.profile-info-card__icon {
    width:       20px;
    height:      20px;
    color:       var(--primary);
    flex-shrink: 0;
}

.profile-info-row {
    display:       flex;
    align-items:   center;
    gap:           var(--space-4);
    padding:       var(--space-4) var(--space-5);
    border-bottom: 1px solid var(--border-light);
    transition:    background var(--transition-fast);
    position:      relative;
}
.profile-info-row:last-child { border-bottom: none; }
.profile-info-row--clickable { cursor: pointer; }
.profile-info-row--clickable:hover { background: var(--surface-3); }

.profile-info-row__icon-wrap {
    width:           40px;
    height:          40px;
    border-radius:   var(--radius-full);
    background:      var(--primary-light);
    display:         flex;
    align-items:     center;
    justify-content: center;
    flex-shrink:     0;
}
.profile-info-row__icon-wrap--danger { background: var(--danger-light); }
.profile-info-row__icon-wrap--success{ background: var(--success-light); }
.profile-info-row__icon-wrap--warning{ background: var(--warning-light); }

.profile-info-row__icon {
    width:  20px;
    height: 20px;
    color:  var(--primary);
}
.profile-info-row__icon-wrap--danger  .profile-info-row__icon { color: var(--danger); }
.profile-info-row__icon-wrap--success .profile-info-row__icon { color: var(--success); }
.profile-info-row__icon-wrap--warning .profile-info-row__icon { color: var(--warning); }

.profile-info-row__content {
    flex:      1;
    min-width: 0;
}
.profile-info-row__label {
    font-size:  var(--text-xs);
    color:      var(--text-muted);
    line-height:1;
    margin-bottom: 3px;
}
.profile-info-row__value {
    font-size:   var(--text-sm);
    color:       var(--text);
    word-break:  break-word;
    line-height: var(--leading-normal);
}
.profile-info-row__value--muted   { color: var(--text-muted); font-style: italic; }
.profile-info-row__value--primary { color: var(--primary); }
.profile-info-row__value--danger  { color: var(--text-danger); }

.profile-info-row__action {
    flex-shrink: 0;
    color:       var(--text-muted);
    display:     flex;
    align-items: center;
    gap:         var(--space-1);
}
.profile-info-row__action svg { width: 16px; height: 16px; }

/* Copy button */
.profile-copy-btn {
    opacity:     0;
    transition:  opacity var(--transition-fast),
    color   var(--transition-fast);
    color:       var(--text-muted);
    cursor:      pointer;
}
.profile-info-row--clickable:hover .profile-copy-btn,
.profile-info-row:hover            .profile-copy-btn { opacity: 1; }
.profile-copy-btn:hover { color: var(--primary); }
.profile-copy-btn svg   { width: 14px; height: 14px; }

/* ──────────────────────────────────────────────────────────
   6. SHARED MEDIA  (photos/files grid)
────────────────────────────────────────────────────────── */
.profile-media-card {
    background:    var(--surface);
    border-radius: var(--radius-2xl);
    border:        1px solid var(--border-light);
    overflow:      hidden;
}

.profile-media-card__header {
    display:        flex;
    align-items:    center;
    justify-content:space-between;
    padding:        var(--space-4) var(--space-5);
    border-bottom:  1px solid var(--border-light);
}
.profile-media-card__title {
    font-size:   var(--text-md);
    font-weight: var(--weight-semibold);
    color:       var(--text);
}
.profile-media-card__more {
    font-size:  var(--text-sm);
    color:      var(--primary);
    cursor:     pointer;
    transition: color var(--transition-fast);
}
.profile-media-card__more:hover { color: var(--primary-hover); }

/* Media tabs */
.profile-media-tabs {
    display:     flex;
    border-bottom:1px solid var(--border-light);
    overflow-x:  auto;
    scrollbar-width: none;
}
.profile-media-tabs::-webkit-scrollbar { display: none; }

.profile-media-tab {
    flex:        0 0 auto;
    padding:     var(--space-3) var(--space-4);
    font-size:   var(--text-sm);
    font-weight: var(--weight-medium);
    color:       var(--text-muted);
    cursor:      pointer;
    border-bottom:2px solid transparent;
    transition:  color         var(--transition-base),
    border-color  var(--transition-base);
    white-space: nowrap;
}
.profile-media-tab:hover { color: var(--text); }
.profile-media-tab.active {
    color:        var(--primary);
    border-color: var(--primary);
}

/* Grid */
.profile-media-grid {
    display:               grid;
    grid-template-columns: repeat(3, 1fr);
    gap:                   2px;
    padding:               var(--space-3);
}
.profile-media-grid--4 { grid-template-columns: repeat(4, 1fr); }

.profile-media-item {
    position:      relative;
    aspect-ratio:  1 / 1;
    overflow:      hidden;
    border-radius: var(--radius-md);
    cursor:        pointer;
    background:    var(--surface-3);
}
.profile-media-item img,
.profile-media-item video {
    width:      100%;
    height:     100%;
    object-fit: cover;
    display:    block;
    transition: transform var(--transition-base);
}
.profile-media-item:hover img,
.profile-media-item:hover video { transform: scale(1.06); }

/* Video indicator */
.profile-media-item__play {
    position:        absolute;
    bottom:          var(--space-1);
    right:           var(--space-1);
    width:           24px;
    height:          24px;
    background:      rgba(0,0,0,0.5);
    border-radius:   50%;
    display:         flex;
    align-items:     center;
    justify-content: center;
}
.profile-media-item__play svg { width: 10px; height: 10px; color: white; }

/* Duration badge */
.profile-media-item__duration {
    position:      absolute;
    bottom:        var(--space-1);
    left:          var(--space-1);
    background:    rgba(0,0,0,0.5);
    color:         white;
    font-size:     10px;
    padding:       1px 5px;
    border-radius: var(--radius-full);
}

/* Overlay on hover */
.profile-media-item__overlay {
    position:   absolute;
    inset:      0;
    background: rgba(0,0,0,0.3);
    opacity:    0;
    transition: opacity var(--transition-base);
    display:    flex;
    align-items:center;
    justify-content:center;
}
.profile-media-item:hover .profile-media-item__overlay { opacity: 1; }
.profile-media-item__overlay svg { width: 22px; height: 22px; color: white; }

/* Files list (non-image media) */
.profile-files-list {
    display:        flex;
    flex-direction: column;
    padding:        var(--space-3) var(--space-5);
    gap:            0;
}

.profile-file-item {
    display:      flex;
    align-items:  center;
    gap:          var(--space-3);
    padding:      var(--space-3) 0;
    border-bottom:1px solid var(--border-light);
    cursor:       pointer;
    transition:   background var(--transition-fast);
    margin:       0 calc(-1 * var(--space-5));
    padding-left: var(--space-5);
    padding-right:var(--space-5);
}
.profile-file-item:last-child { border-bottom: none; }
.profile-file-item:hover      { background: var(--surface-3); }

.profile-file-icon {
    width:           40px;
    height:          40px;
    border-radius:   var(--radius-md);
    display:         flex;
    align-items:     center;
    justify-content: center;
    font-size:       20px;
    flex-shrink:     0;
    background:      var(--surface-3);
}
.profile-file-icon--pdf  { background: var(--danger-light); }
.profile-file-icon--doc  { background: var(--info-light); }
.profile-file-icon--zip  { background: var(--warning-light); }
.profile-file-icon--mp3  { background: var(--success-light); }

.profile-file-info   { flex: 1; min-width: 0; }
.profile-file-name {
    font-size:     var(--text-sm);
    font-weight:   var(--weight-medium);
    color:         var(--text);
    overflow:      hidden;
    white-space:   nowrap;
    text-overflow: ellipsis;
}
.profile-file-meta {
    display:    flex;
    gap:        var(--space-2);
    font-size:  var(--text-xs);
    color:      var(--text-muted);
    margin-top: 2px;
}

/* Empty media state */
.profile-media-empty {
    display:         flex;
    flex-direction:  column;
    align-items:     center;
    justify-content: center;
    padding:         var(--space-8) var(--space-4);
    text-align:      center;
    gap:             var(--space-2);
    color:           var(--text-muted);
}
.profile-media-empty__icon { font-size: 36px; opacity: 0.4; }
.profile-media-empty__text { font-size: var(--text-sm); }

/* ──────────────────────────────────────────────────────────
   7. MUTUAL GROUPS / CONTACTS
────────────────────────────────────────────────────────── */
.profile-mutual-card {
    background:    var(--surface);
    border-radius: var(--radius-2xl);
    border:        1px solid var(--border-light);
    overflow:      hidden;
}

.profile-mutual-card__header {
    display:        flex;
    align-items:    center;
    justify-content:space-between;
    padding:        var(--space-4) var(--space-5);
    border-bottom:  1px solid var(--border-light);
}
.profile-mutual-card__title {
    font-size:   var(--text-md);
    font-weight: var(--weight-semibold);
    color:       var(--text);
    display:     flex;
    align-items: center;
    gap:         var(--space-2);
}
.profile-mutual-card__count {
    font-size:   var(--text-xs);
    font-weight: var(--weight-normal);
    color:       var(--text-muted);
    background:  var(--surface-3);
    padding:     1px var(--space-2);
    border-radius:var(--radius-full);
}

.profile-mutual-list {
    display:        flex;
    flex-direction: column;
}

.profile-mutual-item {
    display:      flex;
    align-items:  center;
    gap:          var(--space-3);
    padding:      var(--space-3) var(--space-5);
    border-bottom:1px solid var(--border-light);
    cursor:       pointer;
    transition:   background var(--transition-fast);
}
.profile-mutual-item:last-child { border-bottom: none; }
.profile-mutual-item:hover      { background: var(--surface-3); }

.profile-mutual-item__info { flex: 1; min-width: 0; }
.profile-mutual-item__name {
    font-size:     var(--text-sm);
    font-weight:   var(--weight-medium);
    color:         var(--text);
    overflow:      hidden;
    white-space:   nowrap;
    text-overflow: ellipsis;
}
.profile-mutual-item__sub {
    font-size:  var(--text-xs);
    color:      var(--text-muted);
    margin-top: 1px;
}
.profile-mutual-item__arrow {
    color:       var(--text-muted);
    flex-shrink: 0;
}
.profile-mutual-item__arrow svg { width: 16px; height: 16px; }

/* ──────────────────────────────────────────────────────────
   8. PRIVACY SECTION  (own profile settings)
────────────────────────────────────────────────────────── */
.profile-privacy-card {
    background:    var(--surface);
    border-radius: var(--radius-2xl);
    border:        1px solid var(--border-light);
    overflow:      hidden;
}

.profile-privacy-card__header {
    display:       flex;
    align-items:   center;
    gap:           var(--space-3);
    padding:       var(--space-4) var(--space-5);
    border-bottom: 1px solid var(--border-light);
}
.profile-privacy-card__title {
    flex:        1;
    font-size:   var(--text-md);
    font-weight: var(--weight-semibold);
    color:       var(--text);
}
.profile-privacy-card__icon {
    width:  20px;
    height: 20px;
    color:  var(--primary);
}

/* Privacy option row */
.privacy-row {
    display:      flex;
    align-items:  center;
    gap:          var(--space-4);
    padding:      var(--space-4) var(--space-5);
    border-bottom:1px solid var(--border-light);
}
.privacy-row:last-child { border-bottom: none; }

.privacy-row__info { flex: 1; min-width: 0; }
.privacy-row__label {
    font-size:   var(--text-sm);
    font-weight: var(--weight-medium);
    color:       var(--text);
}
.privacy-row__sub {
    font-size:  var(--text-xs);
    color:      var(--text-muted);
    margin-top: 2px;
}
.privacy-row__control {
    flex-shrink: 0;
}

/* Privacy select */
.privacy-select {
    padding:       var(--space-1) var(--space-6) var(--space-1) var(--space-3);
    height:        30px;
    background:    var(--surface-3) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%239e9e9e'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E") no-repeat right 6px center;
    background-size:16px;
    border:        1.5px solid var(--border);
    border-radius: var(--radius-sm);
    font-size:     var(--text-xs);
    color:         var(--text);
    cursor:        pointer;
    transition:    border-color var(--transition-base);
}
.privacy-select:focus {
    border-color: var(--primary);
    box-shadow:   0 0 0 2px rgba(var(--primary-rgb), 0.12);
    outline:      none;
}
[dir="rtl"] .privacy-select {
    padding:           var(--space-1) var(--space-3) var(--space-1) var(--space-6);
    background-position: left 6px center;
}

/* ──────────────────────────────────────────────────────────
   9. DANGER ZONE  (delete account, logout all, etc.)
────────────────────────────────────────────────────────── */
.profile-danger-card {
    background:    var(--surface);
    border-radius: var(--radius-2xl);
    border:        1px solid rgba(244,67,54,0.2);
    overflow:      hidden;
}

.profile-danger-card__header {
    display:       flex;
    align-items:   center;
    gap:           var(--space-3);
    padding:       var(--space-4) var(--space-5);
    border-bottom: 1px solid rgba(244,67,54,0.12);
}
.profile-danger-card__title {
    flex:        1;
    font-size:   var(--text-md);
    font-weight: var(--weight-semibold);
    color:       var(--text-danger);
}
.profile-danger-card__icon {
    width:  20px;
    height: 20px;
    color:  var(--text-danger);
}

.danger-row {
    display:      flex;
    align-items:  center;
    gap:          var(--space-4);
    padding:      var(--space-4) var(--space-5);
    border-bottom:1px solid var(--border-light);
    cursor:       pointer;
    transition:   background var(--transition-fast);
}
.danger-row:last-child { border-bottom: none; }
.danger-row:hover      { background: var(--danger-light); }

.danger-row__icon-wrap {
    width:           40px;
    height:          40px;
    border-radius:   var(--radius-full);
    background:      var(--danger-light);
    display:         flex;
    align-items:     center;
    justify-content: center;
    flex-shrink:     0;
}
.danger-row__icon {
    width:  20px;
    height: 20px;
    color:  var(--text-danger);
}
.danger-row__content { flex: 1; min-width: 0; }
.danger-row__label {
    font-size:   var(--text-sm);
    font-weight: var(--weight-medium);
    color:       var(--text-danger);
}
.danger-row__sub {
    font-size:  var(--text-xs);
    color:      var(--text-muted);
    margin-top: 2px;
}
.danger-row__arrow { color: var(--text-muted); }
.danger-row__arrow svg { width: 16px; height: 16px; }

/* ──────────────────────────────────────────────────────────
   10. AVATAR CROP MODAL
────────────────────────────────────────────────────────── */
.avatar-crop-modal .modal { max-width: 480px; }

.avatar-crop-area {
    position:        relative;
    width:           100%;
    aspect-ratio:    1 / 1;
    overflow:        hidden;
    background:      #000;
    border-radius:   var(--radius-md);
    user-select:     none;
}
.avatar-crop-area img {
    position:   absolute;
    cursor:     move;
    max-width:  none;
    touch-action: none;
}
.avatar-crop-circle {
    position:      absolute;
    inset:         0;
    pointer-events:none;
    display:       flex;
    align-items:   center;
    justify-content:center;
}
.avatar-crop-circle::before {
    content:       '';
    display:       block;
    width:         70%;
    aspect-ratio:  1 / 1;
    border-radius: 50%;
    border:        2px solid rgba(255,255,255,0.8);
    box-shadow:    0 0 0 9999px rgba(0,0,0,0.55);
}
.avatar-crop-zoom {
    display:     flex;
    align-items: center;
    gap:         var(--space-3);
    margin-top:  var(--space-3);
}
.avatar-crop-zoom svg   { width: 16px; height: 16px; color: var(--text-muted); }
.avatar-crop-zoom input[type="range"] {
    flex:       1;
    accent-color: var(--primary);
    height:     4px;
    cursor:     pointer;
}

/* ──────────────────────────────────────────────────────────
   11. EDIT INLINE  (tap-to-edit rows)
────────────────────────────────────────────────────────── */
.profile-inline-edit {
    display:     flex;
    align-items: center;
    gap:         var(--space-2);
    flex:        1;
    min-width:   0;
}
.profile-inline-edit__input {
    flex:          1;
    padding:       var(--space-1) var(--space-2);
    background:    var(--input-bg);
    border:        1.5px solid var(--border-focus);
    border-radius: var(--radius-sm);
    font-size:     var(--text-sm);
    color:         var(--text);
    height:        34px;
    transition:    box-shadow var(--transition-base);
}
.profile-inline-edit__input:focus {
    box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.15);
    outline:    none;
}
.profile-inline-edit__save   { color: var(--success); }
.profile-inline-edit__cancel { color: var(--text-muted); }
.profile-inline-edit__save svg,
.profile-inline-edit__cancel svg { width: 16px; height: 16px; }

/* ──────────────────────────────────────────────────────────
   12. QR CODE SECTION
────────────────────────────────────────────────────────── */
.profile-qr-card {
    background:    var(--surface);
    border-radius: var(--radius-2xl);
    border:        1px solid var(--border-light);
    overflow:      hidden;
    text-align:    center;
}

.profile-qr-card__body {
    padding:        var(--space-6) var(--space-5);
    display:        flex;
    flex-direction: column;
    align-items:    center;
    gap:            var(--space-4);
}
.profile-qr-wrap {
    padding:       var(--space-4);
    background:    white;
    border-radius: var(--radius-xl);
    box-shadow:    var(--shadow-md);
    display:       inline-block;
}
.profile-qr-wrap canvas,
.profile-qr-wrap img {
    display:       block;
    width:         160px;
    height:        160px;
    border-radius: var(--radius-md);
}
.profile-qr-label {
    font-size:   var(--text-sm);
    color:       var(--text-muted);
    max-width:   240px;
    line-height: var(--leading-relaxed);
}
.profile-qr-link {
    font-size:   var(--text-sm);
    color:       var(--primary);
    font-weight: var(--weight-medium);
    word-break:  break-all;
    padding:     var(--space-2) var(--space-3);
    background:  var(--surface-3);
    border-radius:var(--radius-md);
    border:      1px solid var(--border-light);
    width:       100%;
    text-align:  center;
    cursor:      pointer;
    transition:  background var(--transition-fast);
}
.profile-qr-link:hover { background: var(--primary-light); }

/* ──────────────────────────────────────────────────────────
   13. NOTIFICATION PREFS  (per-user mute etc.)
────────────────────────────────────────────────────────── */
.profile-notif-card {
    background:    var(--surface);
    border-radius: var(--radius-2xl);
    border:        1px solid var(--border-light);
    overflow:      hidden;
}

.profile-notif-row {
    display:      flex;
    align-items:  center;
    gap:          var(--space-4);
    padding:      var(--space-4) var(--space-5);
    border-bottom:1px solid var(--border-light);
}
.profile-notif-row:last-child { border-bottom: none; }
.profile-notif-row__info { flex: 1; min-width: 0; }
.profile-notif-row__label {
    font-size:   var(--text-sm);
    font-weight: var(--weight-medium);
    color:       var(--text);
}
.profile-notif-row__sub {
    font-size:  var(--text-xs);
    color:      var(--text-muted);
    margin-top: 2px;
}
.profile-notif-row__control { flex-shrink: 0; }

/* Mute duration chips */
.mute-chips {
    display:     flex;
    flex-wrap:   wrap;
    gap:         var(--space-2);
    padding:     var(--space-3) var(--space-5) var(--space-4);
}
.mute-chip {
    padding:       var(--space-1) var(--space-3);
    border:        1.5px solid var(--border);
    border-radius: var(--radius-full);
    font-size:     var(--text-xs);
    font-weight:   var(--weight-medium);
    color:         var(--text-secondary);
    cursor:        pointer;
    transition:    border-color var(--transition-base),
    background   var(--transition-base),
    color        var(--transition-base);
    user-select:   none;
}
.mute-chip:hover  { border-color: var(--primary); color: var(--primary); }
.mute-chip.active {
    border-color: var(--primary);
    background:   var(--primary-light);
    color:        var(--primary);
}

/* ──────────────────────────────────────────────────────────
   14. REPORT MODAL
────────────────────────────────────────────────────────── */
.report-modal .modal { max-width: 400px; }

.report-reason-list {
    display:        flex;
    flex-direction: column;
    gap:            var(--space-2);
}
.report-reason-item {
    display:       flex;
    align-items:   center;
    gap:           var(--space-3);
    padding:       var(--space-3) var(--space-4);
    border:        1.5px solid var(--border-light);
    border-radius: var(--radius-lg);
    cursor:        pointer;
    transition:    border-color var(--transition-base),
    background   var(--transition-base);
}
.report-reason-item:hover  { border-color: var(--primary); background: var(--primary-light); }
.report-reason-item.active {
    border-color: var(--primary);
    background:   var(--primary-light);
}
.report-reason-item__radio {
    width:         18px;
    height:        18px;
    border:        2px solid var(--border);
    border-radius: 50%;
    flex-shrink:   0;
    display:       flex;
    align-items:   center;
    justify-content:center;
    transition:    border-color var(--transition-base),
    background   var(--transition-base);
}
.report-reason-item.active .report-reason-item__radio {
    border-color: var(--primary);
    background:   var(--primary);
}
.report-reason-item.active .report-reason-item__radio::after {
    content:       '';
    width:         6px;
    height:        6px;
    border-radius: 50%;
    background:    white;
}
.report-reason-item__text {
    font-size: var(--text-sm);
    color:     var(--text);
}
.report-additional {
    margin-top: var(--space-3);
}

/* ──────────────────────────────────────────────────────────
   15. LOADING / SKELETON
────────────────────────────────────────────────────────── */
.profile-skeleton-hero {
    background:    var(--surface);
    border-radius: var(--radius-2xl);
    border:        1px solid var(--border-light);
    overflow:      hidden;
}
.profile-skeleton-cover {
    height:     110px;
    background: var(--surface-3);
    animation:  shimmer 1.4s ease-in-out infinite;
    background-image: linear-gradient(
            90deg,
            var(--surface-3) 0%,
            var(--border-light) 50%,
            var(--surface-3) 100%
    );
    background-size: 200% 100%;
}
.profile-skeleton-body {
    padding:     var(--space-3) var(--space-5) var(--space-5);
    display:     flex;
    flex-direction: column;
    gap:         var(--space-2);
    margin-top:  -40px;
}
.profile-skeleton-avatar {
    width:         88px;
    height:        88px;
    border-radius: 50%;
    border:        4px solid var(--surface);
}

/* ──────────────────────────────────────────────────────────
   16. OWN PROFILE vs. OTHER PROFILE distinction
────────────────────────────────────────────────────────── */

/* Other profile: show message/call CTA */
.profile-cta-bar {
    display:         flex;
    align-items:     center;
    justify-content: center;
    gap:             var(--space-3);
    padding:         var(--space-4) var(--space-5);
    border-top:      1px solid var(--border-light);
    flex-wrap:       wrap;
}

.profile-cta-btn {
    display:         flex;
    flex-direction:  column;
    align-items:     center;
    justify-content: center;
    gap:             var(--space-1);
    padding:         var(--space-3) var(--space-4);
    border-radius:   var(--radius-lg);
    background:      var(--surface-3);
    color:           var(--text-secondary);
    font-size:       var(--text-xs);
    font-weight:     var(--weight-medium);
    cursor:          pointer;
    transition:      background var(--transition-fast),
    color      var(--transition-fast);
    min-width:       72px;
    border:          1.5px solid var(--border-light);
}
.profile-cta-btn:hover {
    background: var(--primary-light);
    color:      var(--primary);
    border-color:var(--primary);
}
.profile-cta-btn--primary {
    background:   var(--primary);
    color:        white;
    border-color: var(--primary);
    box-shadow:   0 2px 8px rgba(var(--primary-rgb), 0.35);
}
.profile-cta-btn--primary:hover {
    background:   var(--primary-hover);
    color:        white;
    border-color: var(--primary-hover);
}
.profile-cta-btn__icon { font-size: 22px; }

/* ──────────────────────────────────────────────────────────
   17. SAVE ACTIONS BAR  (sticky bottom on own profile)
────────────────────────────────────────────────────────── */
.profile-save-bar {
    position:        sticky;
    bottom:          0;
    left:            0;
    right:           0;
    display:         flex;
    align-items:     center;
    justify-content: flex-end;
    gap:             var(--space-2);
    padding:         var(--space-3) var(--space-5);
    padding-bottom:  calc(var(--space-3) + var(--safe-bottom));
    background:      var(--surface-elevated);
    border-top:      1px solid var(--border-light);
    box-shadow:      var(--shadow-lg);
    z-index:         var(--z-sticky);
    animation:       slideUp var(--transition-base) both;
}
.profile-save-bar[hidden] { display: none; }

.profile-save-bar__hint {
    flex:       1;
    font-size:  var(--text-xs);
    color:      var(--text-muted);
}
